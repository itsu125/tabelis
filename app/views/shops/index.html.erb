<div class="w-full max-w-md mx-auto px-4">

  <div class="flex border-b border-t-border mb-4" id="shops-tabs">
    <%# 行きたい %>
    <button type="button"
      class= "tab-btn flex-1 text-center py-2 font-bold text-t-primary border-b-2 border-t-primary" data-status="want">
      行きたいリスト
    </button>

    <%# 行った %>
    <button type="button"
      class= "tab-btn flex-1 text-center py-2 font-bold text-t-text-mid" data-status="went">
      行ったリスト
    </button>
  </div>

  <!-- 検索トグル + リセットボタン -->
  <div class="flex gap-2 mb-4">
    <!-- 🔍検索 トグルボタン -->
    <button id="search-toggle"
            class="flex-1 flex items-center justify-between px-4 py-2 
                   border border-t-border rounded-lg text-t-dark bg-white shadow-sm">
      <span class="font-semibold">🔍 検索</span>
      <span id="search-toggle-icon" class="text-sm">▼</span>
    </button>
    <!-- リセットボタン（一覧全体をリセット） -->
    <%= link_to "リセット",
          shops_path(status: @status),  # 今開いているタブ状態を維持したままリセット
          class: "w-24 text-center px-4 py-2 bg-gray-200 text-gray-700 
                  rounded-lg font-bold border border-gray-300 shadow-sm text-sm" %>
  </div>

  <!-- 検索フォーム（折りたたみ部） -->
  <div id="search-panel"
       class="mt-3 mb-4 p-3 border border-t-border rounded-lg bg-t-light-header shadow-sm hidden opacity-0 transform -translate-y-1 transition-all duration-200">
    <%= render "search_form", q: @q, categories: @categories %>
  </div>

  <% if flash[:notice] %>
    <div class="mb-4 p-4 rounded-xl border border-green-300 bg-green-50 text-green-800 text-sm font-medium shadow-sm">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <% if flash[:alert] %>
    <div class="mb-4 p-4 rounded-xl border border-red-300 bg-red-50 text-red-800 text-sm font-medium shadow-sm">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <!-- 店舗が0件の場合 -->
  <% if @shops.empty? %>
    <div class="text-center text-t-text-mid bg-t-light-header p-6 rounded-xl border border-t-border shadow">
      <p class="text-lg mb-3">まだお店が登録されていません</p>
      <p class="text-sm">右上の <strong>＋</strong> ボタンから<br>追加してみましょう！</p>
    </div>

  <% else %>

    <!-- 店舗カード一覧 -->
    <div class="space-y-4" id="shops-list">
      <% @shops.each do |shop| %>
        <div class="shop-card" data-status="<%= shop.status %>">
          <%= render partial: "shop_card", locals: { shop: shop } %>
        </div>
      <% end %>
    </div>

  <% end %>
</div>
