<div class="max-w-md w-full mx-auto bg-t-light-header shadow-xl rounded-xl p-6 border border-t-border text-t-dark">

  <% if flash[:alert] %>
    <div class="mb-4 p-4 rounded-xl border border-red-300 bg-red-50 text-red-800 text-sm font-medium shadow-sm">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <!-- メイン画像 -->
  <div class="w-full h-56 mb-6 overflow-hidden rounded-lg border border-t-border bg-t-light-header">
    <% if @shop.image.attached? %>
      <%= image_tag @shop.image, class: "w-full h-full object-cover" %>
    <% else %>
      <%= image_tag "no_image.png", class: "w-full h-full object-cover" %>
    <% end %>
  </div>

  <!-- ショップ名（中央揃え） -->
  <h1 class="text-3xl font-extrabold text-center text-t-primary mb-4">
    <%= @shop.name %>
  </h1>

  <!-- わくわく度 -->
  <div class="mb-6 text-center">
    <p class="text-base font-semibold text-t-text-mid mb-1">わくわく度</p>

    <div class="flex justify-center">
      <% 5.times do |i| %>
        <% if i < @shop.rating.to_i %>
          <span class="text-yellow-400 text-2xl">★</span>
        <% else %>
          <span class="text-gray-300 text-2xl">★</span>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- 基本情報 -->
  <div class="space-y-4">

    <div>
      <p class="text-sm font-bold text-t-dark mb-1">カテゴリ</p>
      <% if @shop.category.present? %>
        <span class="inline-flex items-center w-auto px-2 py-1 rounded-full text-xs
                     bg-t-secondary text-t-dark border border-t-border whitespace-nowrap">
          <%= @shop.category.name %>
        </span>
      <% else %>
        <span class="inline-flex items-center w-auto px-2 py-1 rounded-full text-xs
                     bg-gray-200 text-gray-600 border border-gray-400 whitespace-nowrap">
          未分類
        </span>
      <% end %>
    </div>

    <div>
      <p class="text-sm font-bold text-t-dark">住所</p>
      <p class="text-t-text-mid"><%= @shop.address.presence || "未設定" %></p>
    </div>

    <div>
      <p class="text-sm font-bold text-t-dark">URL</p>
      <% if @shop.url.present? %>
        <a href="<%= @shop.url %>" target="_blank"
           class="text-blue-600 underline break-all">
          <%= @shop.url %>
        </a>
      <% else %>
        <p class="text-t-text-mid">未設定</p>
      <% end %>
    </div>

    <div>
      <p class="text-sm font-bold text-t-dark">メモ</p>
      <p class="text-t-text-mid whitespace-pre-line">
        <%= @shop.memo.presence || "未記入" %>
      </p>
    </div>

    <div>
      <p class="text-sm font-bold text-t-dark">登録日</p>
      <p class="text-t-text-mid"><%= l @shop.created_at, format: :long %></p>
    </div>

  </div>

  <!-- ボタン類 -->
  <div class="mt-8 flex flex-col gap-3">

    <!-- 編集 -->
    <%= link_to edit_shop_path(@shop),
        class: "w-full py-3 rounded-lg font-bold text-center bg-t-primary text-white shadow hover:opacity-90 transition" do %>
      編集する
    <% end %>

    <!-- 削除（濃い茶色） -->
    <%= button_to "削除する",
        shop_path(@shop),
        method: :delete,
        data: { turbo_confirm: "本当に削除しますか？" },
        class: "w-full py-3 rounded-lg font-bold text-center bg-t-dark text-white shadow hover:bg-[#2f1f12] transition" %>

    <!-- 戻る -->
    <%= link_to shops_path,
        class: "w-full py-3 rounded-lg font-bold text-center bg-stone-300 text-t-dark hover:bg-stone-400 transition" do %>
      一覧に戻る
    <% end %>

  </div>

</div>
